#!/usr/bin/env node

'use strict';
process.title = 'easidele';
var options = require('../lib/cli').options;
var path = require('path');
var findup = require('findup-sync');
var resolve = require('resolve').sync;
var basedir = process.cwd();

// TODO: Add the help and info message
if(!options.source || !options.destination){
  if(!options.source){
    console.error("Please provide the source directory");
  }
  if(!options.destination){
    console.error("Please provide the desitination directory");
    process.exit(5);
  }
  process.exit(5);
}

// Start looking in the CWD.
var easidelePath = findup('easidele',{nocase:true, cwd:basedir});

if(!easidelePath){
  easidelePath = findup('easidele.js',{nocase:true, cwd:__dirname});
}

if(!easidelePath){
  console.error("Easidele can not be found on your system!");
  process.exit(5);
}

require(easidelePath)(options.source, options.destination);